<!DOCTYPE html>
<html lang="en">

<head>
  <title>View</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
  <script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
</head>

<body style="background-color:greenyellow ; text-align: center">

  <nav class="navbar navbar-expand-sm bg-light navbar-light" style="margin-top: 30px;height:50px;">
    <!-- Brand/logo -->
    <a class="navbar-brand" href="#">
      <img src="/static/airtel-logo-white-text-horizontal.jpg" alt="logo" style="width:100px;">
    </a>
    <ul class="nav navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="/">Home</a>
      </li>
    </ul>

  </nav>

  </div>

  <div class="container-fluid">
    <div class="row content">
      <div class="col-sm-2 sidenav">


        <div class="container">
          <form class="form-horizontal" action="/view" method="post">

            <div class="form-group">
              <label class="control-label col-sm-12" for="tab" style="padding-top:15px">Database name:</label>
              <div class="col-sm-10">
                <input type="text" class="form-control" id="db" placeholder="Database.db" name="db">
              </div>
            </div>

            <div class="text-center">
              <button type="submit" class="btn btn-default float" style="border: 2px solid red;">Submit</button>
            </div>
          </form>

        </div>

        <h5 style="margin-top: 35px; text-align: left;">Database : {{Database}}</h5>

        <h5 style="margin-top: 35px; text-align: left;">All Tables</h5>
        <table id="tbl" class="table  table-hover">
          <thead>
            {% for i in tables %}
            <tr>
              <th> {{ i }} </th>
            </tr>
            {% endfor %}

          </thead>
        </table>
        <h5 style="margin-top: 5px;  text-align: left">{{tablename}}</h5>
        <table id="tbl" class="table  table-hover" style="background-color: darkolivegreen;">
          <thead>
            {% for i in column %}
            <tr>
              <th> {{ i }} </th>
            </tr>
            {% endfor %}

          </thead>
        </table>

        <script>
          const tbl = document.getElementById('tbl');

          tbl.addEventListener('click', event => {
            const el = event.target;
            var a = el.innerText
            document.getElementById("tab").value = a

            document.getElementById('myform').submit();
          });
        </script>

        <div class="container">
          <form id="myform" class="form-horizontal" action="/viewTable" method="post">

            <input type="hidden" class="form-control" id="tab" name="tab">

          </form>
          <script>
            $(document).ready(function () {
              // Setup - add a text input to each footer cell
              $('#example thead th').each(function () {
                var title = $(this).text();
                $(this).html('<input type="text" placeholder="Search ' + title + '" />');
              });

              // DataTable
              var table = $('#example').DataTable();

              // Apply the search
              table.columns().every(function () {
                var that = this;

                $('input', this.header()).on('keyup change clear', function () {
                  if (that.search() !== this.value) {
                    that
                      .search(this.value)
                      .draw();
                  }
                });
              });

              $('#datatableId tfoot tr').appendTo('#datatableId thead');
            });  
          </script>

          <style>
            thead input {
              width: 100%;
              padding: 3px;
              box-sizing: border-box;
            }

            tfoot {
              display: table-header-group;
            }
          </style>

        </div>
      </div>
      <div class="col-sm-10">
        <h3 style="margin-top: 10px;  text-align: center"></h3>
        <table id="example" class="table  table-hover" style="margin-top: 50px">
          <thead>
            <tr>
              {% for i in column %}
              <th>{{ i }} </th>
              {% endfor %}
            </tr>
          </thead>
          <tfoot>
            <tr>
              {% for i in column %}
              <th>{{ i }}</th>
              {% endfor %}
            </tr>
          </tfoot>
          <tbody>
            {% for q in CompleteDet %}
            <tr>
              {% for q0 in q %}
              <td>{{ q0 }}</td>
              {% endfor %}
            </tr>
            {% endfor %}
          </tbody>

        </table>
      </div>
    </div>
</body>

</html>